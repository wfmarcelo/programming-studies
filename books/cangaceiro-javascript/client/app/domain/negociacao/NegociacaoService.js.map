{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obtemNegociacoesDoPeriodo","Promise","all","obterNegociacoesDaSemana","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","then","periodo","reduce","novoArray","item","concat","sort","a","b","data","getTime","catch","err","console","log","Error","get","dados","map","objeto","Date","quantidade","valor"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKC,wBAAL,EADe,EAEf,KAAKC,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKFC,IALE,CAKGC,WAAWA,QACZC,MADY,CACL,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADhB,EACwC,EADxC,EAEZE,IAFY,CAEP,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAEC,IAAF,CAAOC,OAAP,KAAmBH,EAAEE,IAAF,CAAOC,OAAP,EAFtB,CALd,EAQFC,KARE,CAQIC,OAAO;AACVC,gCAAQC,GAAR,CAAYF,GAAZ;AACA,8BAAM,IAAIG,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAXE,CAAP;AAYH;;AAEDlB,2CAA2B;AACvB,2BAAO,KAAKJ,KAAL,CACFuB,GADE,CACE,oBADF,EAEFhB,IAFE,CAGCiB,SAASA,MAAMC,GAAN,CAAUC,UACf,IAAI7B,UAAJ,CAAe,IAAI8B,IAAJ,CAASD,OAAOV,IAAhB,CAAf,EAAsCU,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CADK,CAHV,EAKCV,OAAO;AACH,8BAAM,IAAIG,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAPF,CAAP;AASH;;AAEDjB,mDAAmC;AAC/B,2BAAO,KAAKL,KAAL,CACFuB,GADE,CACE,sBADF,EAEFhB,IAFE,CAGCiB,SAASA,MAAMC,GAAN,CAAUC,UACf,IAAI7B,UAAJ,CAAe,IAAI8B,IAAJ,CAASD,OAAOV,IAAhB,CAAf,EAAsCU,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CADK,CAHV,EAKCV,OAAO;AACH,8BAAM,IAAIG,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAPF,CAAP;AASH;;AAEDhB,oDAAoC;AAChC,2BAAO,KAAKN,KAAL,CACFuB,GADE,CACE,uBADF,EAEFhB,IAFE,CAGCiB,SAASA,MAAMC,GAAN,CAAUC,UACf,IAAI7B,UAAJ,CAAe,IAAI8B,IAAJ,CAASD,OAAOV,IAAhB,CAAf,EAAsCU,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CADK,CAHV,EAKCV,OAAO;AACH,8BAAM,IAAIG,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAPF,CAAP;AASH;AAvD0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from \"../../util/HttpService.js\";\nimport { Negociacao } from \"./Negociacao.js\";\n\nexport class NegociacaoService {\n\n    constructor() {\n        this._http = new HttpService();\n    }\n\n    obtemNegociacoesDoPeriodo() {\n        return Promise.all([\n            this.obterNegociacoesDaSemana(),\n            this.obterNegociacoesDaSemanaAnterior(),\n            this.obterNegociacoesDaSemanaRetrasada()\n        ])\n            .then(periodo => periodo\n                .reduce((novoArray, item) => novoArray.concat(item), [])\n                .sort((a, b) => b.data.getTime() - a.data.getTime()))\n            .catch(err => {\n                console.log(err);\n                throw new Error('Não foi possível obter as negociações do período')\n            });\n    }\n\n    obterNegociacoesDaSemana() {\n        return this._http\n            .get('negociacoes/semana')\n            .then(\n                dados => dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)),\n                err => {\n                    throw new Error('Não foi possível obter as negociações');\n                }\n            );\n    }\n\n    obterNegociacoesDaSemanaAnterior() {\n        return this._http\n            .get('negociacoes/anterior')\n            .then(\n                dados => dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)),\n                err => {\n                    throw new Error('Não foi possível obter as negociações');\n                }\n            );\n    }\n\n    obterNegociacoesDaSemanaRetrasada() {\n        return this._http\n            .get('negociacoes/retrasada')\n            .then(\n                dados => dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)),\n                err => {\n                    throw new Error('Não foi possível obter as negociações');\n                }\n            );\n    }\n}"]}